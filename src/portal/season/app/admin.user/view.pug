div(class="space-y-6", *ngIf="!selectedUser")
    //- 검색 및 필터 영역
    div(class="flex items-center gap-3 flex-wrap")
        div(class="flex-1 min-w-[200px]")
            div(class="flex items-center border border-neutral-200 rounded-md bg-white overflow-hidden", [class.border-blue-400]="searchFocused")
                i(class="ti ti-search text-neutral-400 pl-3 text-sm")
                input(class="w-full h-9 text-sm px-2 border-0 bg-transparent focus:outline-none placeholder-neutral-400",
                    placeholder="이메일, 이름으로 검색",
                    [(ngModel)]="keyword",
                    (focus)="searchFocused = true",
                    (blur)="searchFocused = false",
                    (keydown.enter)="search()")
        select(class="h-9 text-sm border border-neutral-200 rounded-md px-3 bg-white text-neutral-700 focus:outline-none focus:border-blue-400",
            [(ngModel)]="filterMembership",
            (change)="search()")
            option(value="") 전체 등급
            option(value="admin") 관리자
            option(value="user") 일반
        select(class="h-9 text-sm border border-neutral-200 rounded-md px-3 bg-white text-neutral-700 focus:outline-none focus:border-blue-400",
            [(ngModel)]="filterStatus",
            (change)="search()")
            option(value="") 전체 상태
            option(value="active") 활성
            option(value="pending") 대기
            option(value="block") 차단
            option(value="deleted") 삭제됨
        button(class="h-9 px-4 text-sm bg-neutral-800 text-white rounded-md hover:bg-neutral-700 transition-colors",
            (click)="search()")
            i.ti.ti-search.mr-1
            | 검색

    //- 결과 요약
    div(class="text-xs text-neutral-400") 총 {{total}}명

    //- 사용자 테이블
    div(class="border border-neutral-200 rounded-lg overflow-hidden")
        table(class="w-full text-sm")
            thead
                tr(class="bg-neutral-50 border-b border-neutral-200")
                    th(class="text-left px-4 py-2.5 font-medium text-neutral-600") 이메일
                    th(class="text-left px-4 py-2.5 font-medium text-neutral-600") 이름
                    th(class="text-center px-4 py-2.5 font-medium text-neutral-600 w-24") 등급
                    th(class="text-center px-4 py-2.5 font-medium text-neutral-600 w-24") 상태
                    th(class="text-center px-4 py-2.5 font-medium text-neutral-600 w-40") 최근 접속
                    th(class="text-center px-4 py-2.5 font-medium text-neutral-600 w-20") 작업
            tbody
                tr(*ngFor="let user of users",
                    class="border-b border-neutral-100 hover:bg-neutral-50 transition-colors cursor-pointer",
                    (click)="selectUser(user)")
                    td(class="px-4 py-2.5 text-neutral-800") {{user.email}}
                    td(class="px-4 py-2.5 text-neutral-700") {{user.name}}
                    td(class="text-center px-4 py-2.5")
                        span(class="inline-block px-2 py-0.5 text-xs rounded-full",
                            [class.bg-red-100]="user.membership === 'admin'",
                            [class.text-red-700]="user.membership === 'admin'",
                            [class.bg-neutral-100]="user.membership !== 'admin'",
                            [class.text-neutral-600]="user.membership !== 'admin'") {{user.membership === 'admin' ? '관리자' : '일반'}}
                    td(class="text-center px-4 py-2.5")
                        span(class="inline-block px-2 py-0.5 text-xs rounded-full",
                            [class.bg-green-100]="user.status === 'active'",
                            [class.text-green-700]="user.status === 'active'",
                            [class.bg-yellow-100]="user.status === 'pending'",
                            [class.text-yellow-700]="user.status === 'pending'",
                            [class.bg-red-100]="user.status === 'block' || user.status === 'deleted'",
                            [class.text-red-700]="user.status === 'block' || user.status === 'deleted'") {{statusLabel(user.status)}}
                    td(class="text-center px-4 py-2.5 text-neutral-400 text-xs") {{user.last_access | date:'yyyy-MM-dd HH:mm'}}
                    td(class="text-center px-4 py-2.5")
                        button(class="text-neutral-400 hover:text-blue-500 transition-colors",
                            (click)="selectUser(user); $event.stopPropagation()")
                            i.ti.ti-pencil
                tr(*ngIf="users.length === 0")
                    td(class="px-4 py-8 text-center text-neutral-400", colspan="6") 사용자가 없습니다

    //- 페이지네이션
    div(class="flex justify-center", *ngIf="lastPage > 1")
        div(class="flex items-center gap-1")
            button(class="px-3 py-1.5 text-sm border border-neutral-200 rounded-md hover:bg-neutral-100 transition-colors",
                [class.opacity-50]="page <= 1",
                [disabled]="page <= 1",
                (click)="goPage(page - 1)")
                i.ti.ti-chevron-left
            ng-container(*ngFor="let p of pageList()")
                button(class="px-3 py-1.5 text-sm border rounded-md transition-colors",
                    [class.border-neutral-800]="p === page",
                    [class.bg-neutral-800]="p === page",
                    [class.text-white]="p === page",
                    [class.border-neutral-200]="p !== page",
                    [class.hover:bg-neutral-100]="p !== page",
                    (click)="goPage(p)") {{p}}
            button(class="px-3 py-1.5 text-sm border border-neutral-200 rounded-md hover:bg-neutral-100 transition-colors",
                [class.opacity-50]="page >= lastPage",
                [disabled]="page >= lastPage",
                (click)="goPage(page + 1)")
                i.ti.ti-chevron-right

//- 사용자 상세/편집 화면
div(*ngIf="selectedUser", class="space-y-6")
    //- 헤더
    div(class="flex items-center gap-3")
        button(class="p-1.5 rounded-md hover:bg-neutral-200 transition-colors",
            (click)="selectedUser = null; service.render()")
            i.ti.ti-arrow-left.text-lg.text-neutral-600
        h3(class="text-lg font-semibold text-neutral-800") 사용자 정보

    //- 기본 정보 폼
    div(class="border border-neutral-200 rounded-lg p-6 space-y-4")
        h4(class="text-sm font-semibold text-neutral-700 mb-3") 기본 정보
        div(class="grid grid-cols-2 gap-4")
            div
                label(class="block text-xs text-neutral-500 mb-1") 이메일
                input(class="w-full h-9 text-sm px-3 border border-neutral-200 rounded-md bg-white focus:outline-none focus:border-blue-400",
                    [(ngModel)]="selectedUser.email")
            div
                label(class="block text-xs text-neutral-500 mb-1") 이름
                input(class="w-full h-9 text-sm px-3 border border-neutral-200 rounded-md bg-white focus:outline-none focus:border-blue-400",
                    [(ngModel)]="selectedUser.name")
            div
                label(class="block text-xs text-neutral-500 mb-1") 전화번호
                input(class="w-full h-9 text-sm px-3 border border-neutral-200 rounded-md bg-white focus:outline-none focus:border-blue-400",
                    [(ngModel)]="selectedUser.mobile")
            div
                label(class="block text-xs text-neutral-500 mb-1") 등급
                select(class="w-full h-9 text-sm px-3 border border-neutral-200 rounded-md bg-white focus:outline-none focus:border-blue-400",
                    [(ngModel)]="selectedUser.membership")
                    option(value="admin") 관리자
                    option(value="user") 일반
            div
                label(class="block text-xs text-neutral-500 mb-1") 상태
                select(class="w-full h-9 text-sm px-3 border border-neutral-200 rounded-md bg-white focus:outline-none focus:border-blue-400",
                    [(ngModel)]="selectedUser.status")
                    option(value="active") 활성
                    option(value="pending") 대기
                    option(value="block") 차단
                    option(value="deleted") 삭제됨
            div
                label(class="block text-xs text-neutral-500 mb-1") 가입일
                div(class="h-9 text-sm px-3 flex items-center text-neutral-500 bg-neutral-50 border border-neutral-200 rounded-md") {{selectedUser.created | date:'yyyy-MM-dd HH:mm'}}

        div(class="flex gap-2 pt-2")
            button(class="px-4 py-2 text-sm bg-neutral-800 text-white rounded-md hover:bg-neutral-700 transition-colors",
                (click)="saveUser()") 저장
            button(class="px-4 py-2 text-sm border border-neutral-200 text-neutral-600 rounded-md hover:bg-neutral-100 transition-colors",
                (click)="resetPassword()") 비밀번호 초기화
            button(class="px-4 py-2 text-sm border border-blue-200 text-blue-600 rounded-md hover:bg-blue-50 transition-colors",
                (click)="switchToUser()") 사용자 전환
            button(class="px-4 py-2 text-sm border border-red-200 text-red-600 rounded-md hover:bg-red-50 transition-colors",
                (click)="deleteUser()", *ngIf="selectedUser.status !== 'deleted'") 삭제

    //- 참여 프로젝트
    div(class="border border-neutral-200 rounded-lg p-6", *ngIf="selectedUser.projects && selectedUser.projects.length > 0")
        h4(class="text-sm font-semibold text-neutral-700 mb-3") 참여 프로젝트 ({{selectedUser.projects.length}})
        div(class="space-y-2")
            div(*ngFor="let proj of selectedUser.projects",
                class="flex items-center justify-between px-3 py-2 bg-neutral-50 rounded-md")
                div(class="flex items-center gap-2")
                    i.ti.ti-folder.text-neutral-400
                    span(class="text-sm text-neutral-800") {{proj.title}}
                    span(class="text-xs text-neutral-400") ({{proj.namespace}})
                div(class="flex items-center gap-2")
                    span(class="text-xs px-2 py-0.5 rounded-full bg-neutral-200 text-neutral-600") {{proj.role}}
                    span(class="text-xs px-2 py-0.5 rounded-full",
                        [class.bg-green-100]="proj.status === 'open'",
                        [class.text-green-700]="proj.status === 'open'",
                        [class.bg-neutral-100]="proj.status !== 'open'",
                        [class.text-neutral-500]="proj.status !== 'open'") {{proj.status}}
