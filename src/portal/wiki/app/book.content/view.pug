div(class="flex h-full overflow-hidden bg-white")
    div(class="flex flex-col w-80 border-r border-neutral-200 h-full overflow-auto")
        wiz-portal-wiki-book-tree

    div(class="flex-1 flex flex-col h-full overflow-hidden")
        ng-container(*ngIf="wikibook.content.is('content')")
            div(class="flex w-full h-14 items-center px-4 border-b border-neutral-200")
                input(class="flex-auto text-sm border-0 shadow-none font-semibold text-neutral-900 placeholder-neutral-400 focus:outline-none", placeholder="문서 제목을 입력해주세요", [(ngModel)]="wikibook.content.data().title", [disabled]="!wikibook.accessLevel(['admin', 'user'])")

                ng-container(*ngIf="wikibook.content.data().id")
                    div(class="overflow-hidden rounded-lg ml-auto border border-neutral-200 divide-x divide-neutral-200 text-sm font-medium")
                        button(class="py-1.5 min-w-20 transition-colors", [ngClass]="is('default') ? 'bg-blue-500 text-white hover:bg-blue-600' : 'text-neutral-600 hover:bg-neutral-50'", (click)="active('default')") 문서
                        button(class="py-1.5 min-w-20 transition-colors", [ngClass]="is('graph') ? 'bg-blue-500 text-white hover:bg-blue-600' : 'text-neutral-600 hover:bg-neutral-50'", (click)="active('graph')") 그래프

            div(class="relative flex-1 overflow-hidden")
                div(class="h-full ck-fit-content ck-editor-noborder ck-editor-works prose max-w-full", *ngIf="is('default')")
                    textarea('#editor'='')
                div(class="p-6 text-center text-neutral-400", *ngIf="is('graph')") 준비중입니다.

        ng-container(*ngIf="wikibook.content.is('setting') && wikibook.accessLevel(['admin'])")
            div(class="flex w-full h-14 items-center px-4 border-b border-neutral-200")
                div(class="overflow-hidden rounded-lg ml-auto border border-neutral-200 divide-x divide-neutral-200 text-sm font-medium")
                    button(class="py-1.5 min-w-20 transition-colors", [ngClass]="is('default') ? 'bg-blue-500 text-white hover:bg-blue-600' : 'text-neutral-600 hover:bg-neutral-50'", (click)="active('default')") 설정
                    button(class="py-1.5 min-w-20 transition-colors", [ngClass]="is('access') ? 'bg-blue-500 text-white hover:bg-blue-600' : 'text-neutral-600 hover:bg-neutral-50'", (click)="active('access')") 접근권한

            div(class="flex-1 overflow-auto bg-neutral-50 p-5")
                wiz-portal-wiki-book-info(*ngIf="is('default')")
                wiz-portal-wiki-book-access(*ngIf="is('access')")

    //- 우측 사이드바
    div(class="flex flex-col w-80 border-l border-neutral-200 h-full overflow-auto divide-y divide-neutral-200")
        div(class="py-4 px-4", *ngIf="wikibook.accessLevel(['admin', 'user'])")
            div(class="font-semibold text-sm text-neutral-800 mb-3") 문서 관리

            button(class="w-full rounded-md bg-blue-500 text-white text-sm py-2 flex items-center justify-center hover:bg-blue-600 transition-colors", (click)="updateContent()")
                wiz-component-spinner(class="mr-2", *ngIf="isUpdate")
                span 문서 {{ wikibook.content.data().id ? '업데이트' : '생성' }}
                i(class="ti ti-device-floppy ml-2 text-base")

            ng-container(*ngIf="wikibook.content.data().id && wikibook.content.data().id != wikibook.data().home")
                button(class="w-full text-blue-600 text-sm py-2 mt-2 hover:underline underline-offset-4 transition-colors", (click)="home()")
                    span 대문글 지정

        ng-container(*ngIf="wikibook.content.data().id && wikibook.accessLevel(['admin', 'user'])")
            div(class="py-4 px-4")
                div(class="flex items-center font-semibold text-sm text-neutral-800 mb-3")
                    span 리비전
                    button(class="ml-auto inline-flex items-center gap-1 px-2.5 py-1 text-xs bg-neutral-800 text-white rounded-md font-medium hover:bg-neutral-700 transition-colors", (click)="commit()")
                        span 리비전 생성
                        i(class="ti ti-circle-check text-sm")

                div(class="text-sm space-y-1")
                    div(class="px-2 py-1 rounded-md transition-colors", [ngClass]="!revision_id ? 'bg-blue-50' : ''")
                        span(class="text-blue-600 cursor-pointer hover:underline", (click)="loadRevision()") 최신문서
                    div(*ngFor="let revision of wikibook.content.revisions()", class="px-2 py-1 rounded-md transition-colors", [ngClass]="revision.id == revision_id ? 'bg-blue-50' : ''")
                        span(class="text-blue-600 cursor-pointer hover:underline", (click)="loadRevision(revision.id)") {{revision.created}}
                        span(class="text-neutral-400 ml-1") ({{revision.user.name}})

            div(class="py-4 px-4")
                div(class="font-semibold text-sm text-neutral-800 mb-3") 문서 삭제
                button(class="w-full rounded-md text-sm bg-red-50 text-red-600 py-2 hover:bg-red-100 transition-colors", (click)="delete()")
                    span 삭제하기
                    i(class="ti ti-trash ml-2 text-base")
