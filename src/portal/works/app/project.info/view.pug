div(class="flex flex-wrap", *ngIf="loaded")
    //- 좌측 설정 패널
    div(class="w-96 px-2 text-sm")
        //- 기본정보 카드
        div(class="flex flex-col rounded-lg border border-neutral-200 bg-white overflow-hidden divide-y divide-neutral-100")
            div(class="py-4 px-5")
                label(class="block mb-2 text-xs font-medium text-neutral-500 uppercase tracking-wider") 프로젝트명
                input(class="w-full px-3 py-2 text-sm border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 transition-colors", placeholder="새 프로젝트", [(ngModel)]="project.data().title", [disabled]="readOnly")

            div(class="py-4 px-5")
                label(class="block mb-2 text-xs font-medium text-neutral-500 uppercase tracking-wider") 아이콘
                div(class="flex items-center gap-2")
                    button(class="shrink-0 w-9 h-9 border border-neutral-200 rounded-lg bg-contain bg-center bg-cover bg-no-repeat bg-neutral-50 hover:ring-2 hover:ring-blue-500/20 transition-all", style="background-image: url({{project.data().icon}})", (click)="updateIcon()")
                    button(class="px-3 py-1.5 text-sm font-medium text-white bg-neutral-600 rounded-md hover:bg-neutral-500 transition-colors", (click)="updateIcon()") 아이콘 등록
                    button(class="px-3 py-1.5 text-sm font-medium text-blue-600 hover:underline", *ngIf="project.data().icon", (click)="deleteIcon()") 아이콘 삭제

            div(class="py-4 px-5")
                label(class="block mb-2 text-xs font-medium text-neutral-500 uppercase tracking-wider") Namespace
                input(class="w-full px-3 py-2 text-sm border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 transition-colors", placeholder="myproject", [(ngModel)]="project.data().namespace", [disabled]="readOnly")

            div(class="py-4 px-5")
                label(class="block mb-2 text-xs font-medium text-neutral-500 uppercase tracking-wider") 축약명
                input(class="w-full px-3 py-2 text-sm border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 transition-colors", placeholder="DIZEST", [(ngModel)]="project.data().short", [disabled]="readOnly")

            div(class="py-4 px-5", *ngIf="project.data().status != 'draft'")
                label(class="block mb-2 text-xs font-medium text-neutral-500 uppercase tracking-wider") 진행상태
                div(class="flex gap-2 text-sm")
                    label(class="flex items-center gap-1.5 rounded-full px-4 py-1.5 cursor-pointer ring-1 ring-neutral-200 text-neutral-400 hover:text-neutral-700 has-[:checked]:ring-blue-200 has-[:checked]:text-blue-600 has-[:checked]:bg-blue-50 transition-colors")
                        input(class="sr-only", type="radio", name="project-status", value="open", [(ngModel)]="project.data().status", [disabled]="readOnly")
                        i(class="ti ti-player-play text-sm")
                        | 진행중
                    label(class="flex items-center gap-1.5 rounded-full px-4 py-1.5 cursor-pointer ring-1 ring-neutral-200 text-neutral-400 hover:text-neutral-700 has-[:checked]:ring-blue-200 has-[:checked]:text-blue-600 has-[:checked]:bg-blue-50 transition-colors")
                        input(class="sr-only", type="radio", name="project-status", value="close", [(ngModel)]="project.data().status", [disabled]="readOnly")
                        i(class="ti ti-player-stop text-sm")
                        | 종료됨

            div(class="py-4 px-5")
                label(class="block mb-2 text-xs font-medium text-neutral-500 uppercase tracking-wider") 공개범위
                div(class="flex flex-wrap gap-2 text-sm")
                    label(class="flex items-center gap-1.5 rounded-full px-4 py-1.5 cursor-pointer ring-1 ring-neutral-200 text-neutral-400 hover:text-neutral-700 has-[:checked]:ring-blue-200 has-[:checked]:text-blue-600 has-[:checked]:bg-blue-50 transition-colors")
                        input(class="sr-only", type="radio", name="project-visibility", value="private", [(ngModel)]="project.data().visibility", [disabled]="readOnly")
                        i(class="ti ti-lock text-sm")
                        | 비공개
                    label(class="flex items-center gap-1.5 rounded-full px-4 py-1.5 cursor-pointer ring-1 ring-neutral-200 text-neutral-400 hover:text-neutral-700 has-[:checked]:ring-blue-200 has-[:checked]:text-blue-600 has-[:checked]:bg-blue-50 transition-colors", *ngIf="service.auth.show.membership(['admin', 'staff'])")
                        input(class="sr-only", type="radio", name="project-visibility", value="internal", [(ngModel)]="project.data().visibility", [disabled]="readOnly")
                        i(class="ti ti-users text-sm")
                        | 내부공개
                    label(class="flex items-center gap-1.5 rounded-full px-4 py-1.5 cursor-pointer ring-1 ring-neutral-200 text-neutral-400 hover:text-neutral-700 has-[:checked]:ring-blue-200 has-[:checked]:text-blue-600 has-[:checked]:bg-blue-50 transition-colors")
                        input(class="sr-only", type="radio", name="project-visibility", value="public", [(ngModel)]="project.data().visibility", [disabled]="readOnly")
                        i(class="ti ti-lock-open text-sm")
                        | 전체공개

            div(class="py-4 px-5")
                label(class="block mb-2 text-xs font-medium text-neutral-500 uppercase tracking-wider") 시작일
                input(type="date", class="w-full px-3 py-2 text-sm border border-neutral-200 rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 transition-colors", [(ngModel)]="project.data().start", [disabled]="readOnly")

            div(class="py-4 px-5")
                label(class="block mb-2 text-xs font-medium text-neutral-500 uppercase tracking-wider") 마감일
                input(type="date", class="w-full px-3 py-2 text-sm border border-neutral-200 rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 transition-colors", [(ngModel)]="project.data().end", [disabled]="readOnly")

        //- 프로젝트 메뉴 카드
        div(class="flex flex-col rounded-lg border border-neutral-200 bg-white mt-4 overflow-hidden divide-y divide-neutral-100", *ngIf="project.accessLevel(['admin'])")
            div(class="py-4 px-5")
                label(class="block mb-3 text-xs font-medium text-neutral-500 uppercase tracking-wider") 프로젝트 메뉴
                div(class="flex flex-col gap-y-3")
                    label(class="inline-flex items-center cursor-pointer")
                        input(class="sr-only peer", type="checkbox", [(ngModel)]="project.data().extra.menu.meeting")
                        div(class="relative w-11 h-6 bg-neutral-200 peer-focus:outline-none rounded-full peer border border-neutral-300 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-blue-600 after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:size-5 after:transition-all peer-checked:bg-blue-600")
                        span(class="ml-3 text-sm text-neutral-700") 회의록
                    label(class="inline-flex items-center cursor-pointer")
                        input(class="sr-only peer", type="checkbox", [(ngModel)]="project.data().extra.menu.issueboard")
                        div(class="relative w-11 h-6 bg-neutral-200 peer-focus:outline-none rounded-full peer border border-neutral-300 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-blue-600 after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:size-5 after:transition-all peer-checked:bg-blue-600")
                        span(class="ml-3 text-sm text-neutral-700") 이슈보드
                    label(class="inline-flex items-center cursor-pointer")
                        input(class="sr-only peer", type="checkbox", [(ngModel)]="project.data().extra.menu.wiki")
                        div(class="relative w-11 h-6 bg-neutral-200 peer-focus:outline-none rounded-full peer border border-neutral-300 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-blue-600 after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:size-5 after:transition-all peer-checked:bg-blue-600")
                        span(class="ml-3 text-sm text-neutral-700") 위키
                    label(class="inline-flex items-center cursor-pointer")
                        input(class="sr-only peer", type="checkbox", [(ngModel)]="project.data().extra.menu.drive")
                        div(class="relative w-11 h-6 bg-neutral-200 peer-focus:outline-none rounded-full peer border border-neutral-300 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-blue-600 after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:size-5 after:transition-all peer-checked:bg-blue-600")
                        span(class="ml-3 text-sm text-neutral-700") 드라이브

        //- 메인메뉴 카드
        div(class="flex flex-col rounded-lg border border-neutral-200 bg-white mt-4 overflow-hidden divide-y divide-neutral-100", *ngIf="project.accessLevel(['admin'])")
            div(class="py-4 px-5")
                label(class="block mb-2 text-xs font-medium text-neutral-500 uppercase tracking-wider") 메인메뉴
                select(class="w-full px-3 py-2 text-sm border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 transition-colors", [(ngModel)]="project.data().extra.main")
                    option(value="info") 프로젝트 정보
                    option(value="meeting") 회의록
                    option(value="issueboard") 이슈보드
                    option(value="drive") 드라이브

        //- 저장 버튼
        div(*ngIf="hasSaveBtn && !readOnly", class="mt-4")
            button(class="w-full py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600 transition-colors", (click)="update()")
                i(class="ti ti-device-floppy text-base mr-1")
                | 저장하기

    //- 우측 콘텐츠 패널
    div(class="flex-1 px-2")
        //- 프로젝트 내용 카드
        div(class="flex flex-col rounded-lg border border-neutral-200 bg-white mb-4 overflow-hidden divide-y divide-neutral-100")
            div(class="flex items-center py-4 px-5")
                h4(class="text-sm font-semibold text-neutral-900") 프로젝트 내용
                div(class="ml-auto")
                button(class="px-4 py-1.5 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600 transition-colors", (click)="update()", *ngIf="hasSaveBtn && !readOnly")
                    i(class="ti ti-device-floppy text-base mr-1")
                    | 저장하기

            div(class="p-0 workspace-ckeditor ck-editor-noborder ck-editor-works prose max-w-full")
                textarea(#editor="", [attr.namespace]="NAMESPACE")

        //- 프로젝트 목표 카드
        div(class="flex flex-col rounded-lg border border-neutral-200 bg-white mb-4 overflow-hidden divide-y divide-neutral-100")
            div(class="flex items-center py-4 px-5")
                h4(class="text-sm font-semibold text-neutral-900") 프로젝트 목표
                div(class="ml-auto")
                button(class="px-4 py-1.5 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600 transition-colors", (click)="update()", *ngIf="hasSaveBtn && !readOnly")
                    i(class="ti ti-device-floppy text-base mr-1")
                    | 저장하기

            div(class="overflow-x-auto", *ngIf="project.data().extra && project.data().extra.goal")
                table(class="min-w-full")
                    thead
                        tr(class="text-xs font-medium text-neutral-500 divide-x divide-neutral-200")
                            th(class="py-2.5 px-3 bg-neutral-50 w-40 whitespace-nowrap text-left") 분류
                            th(class="py-2.5 px-3 bg-neutral-50 text-left") 목표
                            th(class="py-2.5 px-3 bg-neutral-50 text-left") 상세설명
                            th(class="py-2.5 px-3 bg-neutral-50 w-32 whitespace-nowrap text-left") 단위
                            th(class="py-2.5 px-3 bg-neutral-50 w-1 whitespace-nowrap", *ngIf="!readOnly")

                    tbody([sortablejs]="project.data().extra.goal", [sortablejsOptions]="{ animation: 150 }")
                        ng-container(*ngFor="let item of project.data().extra.goal")
                            tr(class="text-left divide-x divide-neutral-200 border-t border-neutral-100")
                                td(class="py-2 px-3 w-40 whitespace-nowrap")
                                    select(class="w-full text-sm px-2 py-1 border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400", [(ngModel)]="item.type", [disabled]="readOnly")
                                        option(value="서비스") 서비스
                                        option(value="시스템") 시스템
                                        option(value="솔루션") 솔루션
                                        option(value="알고리즘") 알고리즘
                                        option(value="문서") 문서
                                        option(value="논문") 논문
                                        option(value="특허") 특허
                                        option(value="기타") 기타
                                td(class="py-2 px-3 whitespace-nowrap")
                                    input(class="w-full text-sm px-2 py-1 border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400", [(ngModel)]="item.title", placeholder="데이터 공유 웹 서비스", [disabled]="readOnly")
                                td(class="py-2 px-3 whitespace-nowrap")
                                    textarea(class="w-full text-sm px-2 py-1 resize-none border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400", [(ngModel)]="item.desc", rows="3", placeholder="상세 설명", [disabled]="readOnly")
                                td(class="py-2 px-3 w-32 whitespace-nowrap")
                                    input(class="w-full text-sm px-2 py-1 border border-neutral-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400", [(ngModel)]="item.unit", placeholder="수량/단위", [disabled]="readOnly")
                                td(class="py-2 px-3 w-1 whitespace-nowrap", *ngIf="!readOnly")
                                    button(class="text-sm px-3 py-1 bg-red-50 text-red-600 rounded-md ring-1 ring-inset ring-red-200 hover:bg-red-100 transition-colors", (click)="arrayRemove(project.data().extra.goal, item)")
                                        i(class="ti ti-x")

            div(class="px-4 py-2", *ngIf="!readOnly")
                button(class="w-full text-xs text-neutral-500 bg-neutral-100 hover:bg-neutral-200 rounded-md py-1.5 transition-colors", (click)="arrayAdd(project.data().extra.goal, {type: '서비스'})")
                    i(class="ti ti-plus mr-1")
                    | 항목 추가

ng-keyboard-shortcuts([shortcuts]="shortcuts")
