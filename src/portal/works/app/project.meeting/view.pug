div(class="w-full h-full overflow-hidden relative bg-white", *ngIf="selected")
    //- 좌측 사이드바: 회의록 목록
    div(class="flex flex-col w-64 h-full overflow-hidden border-r border-neutral-200 relative z-[100]", [ngClass]="tab == 'item' ? 'max-sm:hidden' : ''", class="max-sm:!w-full")
        button(class="w-full py-2.5 px-4 bg-blue-500 text-sm text-white font-medium hover:bg-blue-600 transition-colors", *ngIf="!readOnly", (click)="create()")
            i(class="ti ti-plus mr-2 text-base")
            span 회의록 생성하기

        div(class="flex relative border-b border-neutral-200")
            input(class="w-full py-2.5 pl-3 pr-10 border-none shadow-none outline-none text-sm placeholder-neutral-400 peer", placeholder="검색", [(ngModel)]="query.text")
            span(class="absolute right-3 top-1/2 -translate-y-1/2 text-neutral-300 peer-focus:text-blue-500 transition-colors")
                i(class="ti ti-search text-lg")

        div(class="flex-1 overflow-hidden")
            div(class="h-full overflow-auto pb-32")
                div(class="divide-y divide-neutral-100")
                    ng-container(*ngFor="let item of list")
                        div(class="p-3 cursor-pointer hover:bg-neutral-50 transition-colors", *ngIf="item.title.toLowerCase().indexOf(query.text.toLowerCase()) >= 0", [ngClass]="selected.id == item.id ? 'bg-neutral-100' : ''", (click)="select(item)")
                            div(class="font-medium text-sm text-neutral-800 leading-tight") {{item.title}}
                            span(class="text-neutral-400 text-xs mt-1 block") {{item.meetdate.substring(0, 16)}} / {{item.user.name}}

    //- 우측 콘텐츠 영역
    div(class="flex flex-col items-center w-full h-full absolute pl-64 top-0", [ngClass]="tab == 'list' ? 'max-sm:hidden' : ''", class="max-sm:!p-0")
        //- 빈 상태
        ng-container(*ngIf="editorLoaded && !(isEditable() || list.length > 0)")
            div(class="flex flex-col items-center justify-center py-16 text-center")
                i(class="ti ti-notes text-5xl text-neutral-300 mb-4")
                p(class="text-base text-neutral-500") 진행된 회의가 없습니다

        //- 회의 편집 영역
        ng-container(*ngIf="editorLoaded && (isEditable() || list.length > 0)")
            div(class="flex items-center gap-x-3 w-full px-6 py-3 border-b border-neutral-200", class="max-sm:!block max-sm:!px-3 max-sm:!py-2")
                div(class="hidden", class="max-sm:block max-sm:pb-2 max-sm:!p-0 max-sm:!flex")
                    button(class="w-full py-1.5 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors", (click)="switchTab('list')") 회의목록

                div(class="flex-1", class="max-sm:!p-0 max-sm:!flex")
                    label(class="self-center font-medium block text-sm text-neutral-500", class="max-sm:w-16") 회의제목
                    input(class="w-full px-0 py-1 border-0 border-b border-neutral-200 text-sm shadow-none focus:border-blue-500 focus:ring-0 outline-none placeholder-neutral-400 transition-colors", placeholder="새로운 회의", [(ngModel)]="selected.title", (change)="onChange(false)", [disabled]="!isEditable()")

                div(class="px-3", class="max-sm:!p-0 max-sm:!flex")
                    label(class="self-center font-medium block text-sm text-neutral-500", class="max-sm:w-16") 회의일시
                    input(type="date", class="px-0 py-1 border-0 border-b border-neutral-200 text-xs shadow-none focus:border-blue-500 focus:ring-0 outline-none transition-colors", [(ngModel)]="selected.meetdate_day", (change)="onChange(false)", [disabled]="!isEditable()")

                div(class="px-3", class="max-sm:!p-0 max-sm:!flex")
                    label(class="self-center font-medium block text-sm text-neutral-500", class="max-sm:w-16") 회의시간
                    input(type="time", class="px-0 py-1 border-0 border-b border-neutral-200 text-xs shadow-none focus:border-blue-500 focus:ring-0 outline-none transition-colors", [(ngModel)]="selected.meetdate_time", step="1800", (change)="onChange(false)", [disabled]="!isEditable()")

                div(class="px-3", *ngIf="selected.id", class="max-sm:!p-0 max-sm:!flex")
                    label(class="self-center font-medium block text-sm text-neutral-500", class="max-sm:w-16") 버전
                    select(class="px-0 py-1 border-0 border-b border-neutral-200 text-xs shadow-none focus:border-blue-500 focus:ring-0 outline-none bg-transparent transition-colors", [(ngModel)]="selected.version", (change)="buildEditor()")
                        option(value="latest") 최신
                        ng-container(*ngFor="let ver of versions")
                            option([value]="ver.id") {{ver.name}}

            //- 액션 바
            div(class="flex items-center px-4 py-2 border-b border-neutral-100 w-full overflow-y-hidden overflow-x-auto h-12 min-h-12")
                button(class="inline-flex items-center gap-1.5 text-xs rounded-md bg-neutral-100 text-neutral-600 h-7 px-3 mr-2 whitespace-nowrap hover:bg-neutral-200 transition-colors", (click)="upload()", *ngIf="isEditable()")
                    i(class="ti ti-upload text-sm")
                    span 파일 업로드
                div(class="ml-auto")
                ng-container(*ngIf="!readOnly")
                    ng-container(*ngIf="selected.id")
                        button(class="inline-flex items-center gap-1.5 text-xs rounded-md bg-red-50 text-red-600 h-7 px-3 mr-2 whitespace-nowrap hover:bg-red-100 transition-colors", (click)="delete()", *ngIf="isEditable() && project.accessLevel(['admin', 'manager'])")
                            i(class="ti ti-trash text-sm")
                            span 삭제하기
                        button(class="inline-flex items-center gap-1.5 text-xs rounded-md bg-neutral-100 text-neutral-600 h-7 px-3 mr-2 whitespace-nowrap hover:bg-neutral-200 transition-colors", (click)="revision()", *ngIf="isEditable()")
                            i(class="ti ti-file-check text-sm")
                            span 리비전 생성

                    button(class="inline-flex items-center gap-1.5 text-xs rounded-md bg-blue-500 text-white h-7 px-3 mr-2 whitespace-nowrap hover:bg-blue-600 transition-colors", (click)="update()", *ngIf="isEditable()")
                        div(class="border-neutral-300 h-[12px] w-[12px] animate-spin rounded-full border-[4px] border-t-white inline-block", *ngIf="isUpdate")
                        i(class="ti ti-device-floppy text-sm", *ngIf="!isUpdate")
                        span 저장하기

            //- 첨부파일 바
            div(class="flex items-center px-4 py-2 border-b border-neutral-100 w-full overflow-y-hidden overflow-x-auto h-12 min-h-12", *ngIf="selected.attachment && selected.attachment.length > 0")
                ng-container(*ngFor="let file of selected.attachment")
                    div(class="inline-flex items-center bg-neutral-100 rounded-md px-2 py-1 mr-2 text-xs")
                        a(class="max-w-32 text-ellipsis overflow-hidden whitespace-nowrap text-neutral-700 hover:text-blue-600 transition-colors", [title]="file.filename", [attr.href]="project.downloadUrl(file.id, file.filename)", target="_blank") {{file.filename}}
                        a(class="flex items-center text-neutral-400 hover:text-blue-500 ml-2 transition-colors", [attr.href]="project.downloadUrl(file.id, file.filename)", target="_blank")
                            i(class="ti ti-download text-sm")
                        a(class="flex items-center text-neutral-400 hover:text-red-500 ml-1 cursor-pointer transition-colors", (click)="removeAttachment(file)", *ngIf="isEditable()")
                            i(class="ti ti-x text-sm")

            //- 에디터
            div(class="flex-auto w-full border-t border-neutral-200 ck-fit-content ck-editor-noborder ck-editor-works ck-editor-docs prose max-w-full", style="height: calc(100% - 7rem)")
                textarea('#editor'='', [attr.namespace]="NAMESPACE")
