.flex.flex-col.p-5([ngClass]="msg.parent_id && 'py-2 pl-9'",)
    .flex
        .ff-eb(*ngIf="project.member.map[msg.user_id]")
            i.mr-2.fa-solid.fa-reply(*ngIf="msg.parent_id")
            span {{project.member.map[msg.user_id].name}}
        .ml-auto
        .ml-2
        span.text-gray-500 {{project.display.date(msg.created)}}
        ng-container(*ngIf="!msg.parent_id")
            .ml-2
            span.cursor-pointer(*ngIf="cache.message.parent_id != msg.id")
                i.fa-solid.fa-reply.rotate-180((click)="event.replyMessage(msg)")
            .ml-2
            .cursor-pointer(*ngIf="msg.type != 'log'")
                i.fa-regular.fa-star((click)="event.favoriteMessage(msg)", *ngIf="msg.favorite == 0")
                i.text-yellow-500.fa-solid.fa-star((click)="event.favoriteMessage(msg)", *ngIf="msg.favorite == 1")
    
    div(*ngIf="msg.attachment && msg.attachment.length > 0", class="mb-[6px]")
        ng-container(*ngFor="let file of msg.attachment")
            a.rounded-sm.text-xs.bg-gray-700.text-white.mr-1.mt-1(class="hover:bg-gray-600 px-2 py-0.5 overflow-hidden max-w-[180px] text-ellipsis text-nowrap inline-block", [attr.href]="project.downloadUrl(file.id, file.filename)", target="_blank", [title]="file.filename")
                i.fa-solid.fa-download.mr-2
                span {{file.filename}}

    .relative.break-all(*ngIf="msg.type == 'log'") {{msg.message}}
    .relative.break-all(*ngIf="msg.type != 'log'", [innerHtml]="project.display.markdown(msg.message)")

.p-0.d-block(*ngIf="msg.images && msg.images.length > 0")
    ng-container(*ngFor="let grid of event.imageGrid(msg)")
        .flex.flex-wrap.p-0.m-0
            ng-container(*ngFor="let image of grid.items")
                .bg-slate-100.p-0.m-0([ngClass]="grid.size")
                    a.relative.block.w-full.bg-center.bg-no-repeat.bg-cover.cursor-pointer([style.background-image]="image.load ? event.imageUrl(image) : ''", [attr.href]="project.downloadUrl(image.id, image.filename)", target="_blank")
                        ng-container(*ngIf="grid.size == 'w-1/4'")
                            svg(class="hover:border-4 hover:border-blue-500", viewBox="0 0 100 100")
                                rect(width="100", height="100", style="fill:rgba(255,255,255,0);")
                        ng-container(*ngIf="grid.size == 'w-1/3'")
                            svg(class="hover:border-4 hover:border-blue-500", viewBox="0 0 100 70")
                                rect(width="100", height="70", style="fill:rgba(255,255,255,0);")
                        ng-container(*ngIf="grid.size == 'w-1/2'")
                            svg(class="hover:border-4 hover:border-blue-500", viewBox="0 0 100 50")
                                rect(width="100", height="50", style="fill:rgba(255,255,255,0);")
                        ng-container(*ngIf="grid.size == 'w-full'")
                            svg(class="hover:border-4 hover:border-blue-500", viewBox="0 0 100 50")
                                rect(width="100", height="50", style="fill:rgba(255,255,255,0);")
