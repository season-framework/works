div(class="flex flex-col max-sm:flex-row max-sm:flex-wrap h-screen max-sm:h-auto max-sm:w-full overflow-y-auto max-sm:overflow-y-hidden bg-neutral-50 pt-4 max-sm:py-1 w-[260px] border-r max-sm:border-b border-neutral-200")
    button(type="button", class="hidden max-sm:block ml-3 mr-4 p-1 rounded-md hover:bg-neutral-200 transition-colors", (click)="service.navbar.toggle(); $event.stopPropagation();")
        i.ti.ti-menu-2.text-2xl.text-neutral-600

    a(routerLink="/", class="flex shrink-0 items-center cursor-pointer px-4 py-1")
        img(class="w-40 mx-auto", src="/assets/portal/season/brand/logo-black.svg", alt="Season WORKS")

    nav(class="flex flex-col text-sm mt-4 border-t border-neutral-200 transition-all duration-300 max-sm:h-0 max-sm:!basis-full max-sm:mt-0 max-sm:border-t-0", *ngIf="service.auth.show(true)", [ngbCollapse]="service.navbar.isMenuCollapsed")
        div(class="px-4 py-3")
            p(class="text-sm text-neutral-700 font-medium") {{service.auth.session.name}}
            p(class="text-xs text-neutral-400 mt-0.5") {{service.auth.session.email}}
        div(class="flex bg-neutral-100 border-y border-neutral-200 h-9")
            button(class="flex-1 text-center text-sm text-neutral-600 hover:bg-neutral-200/60 transition-colors", routerLink="/mypage", routerLinkActive="font-medium text-neutral-900 !bg-neutral-200/60")
                i.ti.ti-user-circle.text-base.align-middle
                span.ml-1.align-middle 마이페이지
            button(class="flex-1 text-center text-sm text-neutral-600 border-l border-neutral-200 hover:bg-neutral-200/60 transition-colors", (click)="logout()")
                i.ti.ti-logout.text-base.align-middle
                span.ml-1.align-middle 로그아웃
            button(*ngIf="service.auth.session.membership === 'admin'", class="w-9 text-neutral-500 hover:bg-neutral-200/60 transition-colors border-l border-neutral-200", routerLink="/admin", routerLinkActive="!bg-neutral-200/60")
                i.ti.ti-settings.text-lg

    nav([ngbCollapse]="service.navbar.isMenuCollapsed", class="flex grow flex-col mt-1 max-sm:mt-0 max-sm:h-0 transition-all duration-300 max-sm:!basis-full px-2")
        ul(role="list", class="flex flex-1 flex-col py-2 space-y-0.5")
            li
                a(*ngIf="service.auth.show(true)", routerLink="/dashboard", class="flex items-center gap-3 px-3 py-2 rounded-md text-sm text-neutral-600 hover:bg-neutral-200/60 transition-colors", routerLinkActive="font-medium text-neutral-900 bg-neutral-200/60")
                    i.ti.ti-layout-dashboard(class="text-[18px]")
                    | 대시보드
            li
                a(routerLink="/explore/project", class="flex items-center gap-3 px-3 py-2 rounded-md text-sm text-neutral-600 hover:bg-neutral-200/60 transition-colors", routerLinkActive="font-medium text-neutral-900 bg-neutral-200/60")
                    i.ti.ti-folder(class="text-[18px]")
                    | 프로젝트
            li
                a(*ngIf="service.auth.show(true)", routerLink="/issues", class="flex items-center gap-3 px-3 py-2 rounded-md text-sm text-neutral-600 hover:bg-neutral-200/60 transition-colors", routerLinkActive="font-medium text-neutral-900 bg-neutral-200/60")
                    i.ti.ti-message-circle(class="text-[18px]")
                    | 이슈모음
            li
                a(routerLink="/explore/wiki", class="flex items-center gap-3 px-3 py-2 rounded-md text-sm text-neutral-600 hover:bg-neutral-200/60 transition-colors", routerLinkActive="font-medium text-neutral-900 bg-neutral-200/60")
                    i.ti.ti-book-2(class="text-[18px]")
                    | 위키탐색

            li(*ngIf="project.status() && project.isLoaded")
                div(class="mt-3 mb-1 border-t border-neutral-200")
                div(class="flex items-center gap-2 px-3 py-2 mt-2")
                    span(class="cursor-pointer transition-all hover:scale-110", (click)="project.untrack(!project.data().userconfig_untrack)")
                        i.ti.ti-star(class="text-[18px] text-neutral-400", *ngIf="project.data().userconfig_untrack")
                        i.ti.ti-star-filled(class="text-[18px] text-amber-400", *ngIf="!project.data().userconfig_untrack")
                    span(class="text-sm font-medium text-neutral-900 truncate") {{project.data().title}}
                div(class="space-y-0.5 ml-2")
                    a(class="flex items-center gap-3 px-3 py-1.5 rounded-md text-sm text-neutral-500 hover:bg-neutral-200/60 transition-colors", [routerLink]="project.menuLink('info')", routerLinkActive="font-medium text-neutral-900 bg-neutral-200/60") 프로젝트 정보
                    a(class="flex items-center gap-3 px-3 py-1.5 rounded-md text-sm text-neutral-500 hover:bg-neutral-200/60 transition-colors", [routerLink]="project.menuLink('member')", routerLinkActive="font-medium text-neutral-900 bg-neutral-200/60") 구성원
                    a(class="flex items-center gap-3 px-3 py-1.5 rounded-md text-sm text-neutral-500 hover:bg-neutral-200/60 transition-colors", [routerLink]="project.menuLink('meeting')", routerLinkActive="font-medium text-neutral-900 bg-neutral-200/60", *ngIf="project.data().extra.menu.meeting") 회의록
                    a(class="flex items-center gap-3 px-3 py-1.5 rounded-md text-sm text-neutral-500 hover:bg-neutral-200/60 transition-colors", [routerLink]="project.menuLink('issueboard')", routerLinkActive="font-medium text-neutral-900 bg-neutral-200/60", *ngIf="project.data().extra.menu.issueboard") 이슈보드
                    a(class="flex items-center gap-3 px-3 py-1.5 rounded-md text-sm text-neutral-500 hover:bg-neutral-200/60 transition-colors", [routerLink]="project.menuLink('wiki')", routerLinkActive="font-medium text-neutral-900 bg-neutral-200/60", *ngIf="project.data().extra.menu.wiki") 위키
                    a(class="flex items-center gap-3 px-3 py-1.5 rounded-md text-sm text-neutral-500 hover:bg-neutral-200/60 transition-colors", [routerLink]="project.menuLink('drive')", routerLinkActive="font-medium text-neutral-900 bg-neutral-200/60", *ngIf="project.data().extra.menu.drive") 드라이브

        //- 프로젝트 스위칭 드롭다운
        div(class="mt-auto px-2 pb-3 pt-2 border-t border-neutral-200 project-switcher-container", *ngIf="service.auth.show(true)")
            div(class="relative")
                //- 드롭다운 패널 (fixed로 overflow 클리핑 회피)
                div(class="fixed bg-white border border-neutral-200 rounded-lg shadow-lg overflow-hidden z-[9999] w-[320px]", *ngIf="projectSwitcher.open", [ngStyle]="projectSwitcher.panelStyle")
                    div(class="px-2.5 pt-2.5 pb-2")
                        div(class="flex items-center border border-neutral-200 rounded-md bg-neutral-50 overflow-hidden", [class.border-blue-400]="projectSwitcher.searchFocused")
                            i(class="ti ti-search text-neutral-400 pl-2 text-sm")
                            input(class="w-full h-8 text-sm px-2 border-0 bg-transparent focus:outline-none placeholder-neutral-400", placeholder="프로젝트 검색", [(ngModel)]="projectSwitcher.keyword", (click)="$event.stopPropagation()", (focus)="projectSwitcher.searchFocused = true", (blur)="projectSwitcher.searchFocused = false", (keydown)="onSwitcherKeydown($event)", (input)="onSwitcherInput()")
                    div(class="max-h-80 overflow-y-auto project-switcher-list")
                        ng-container(*ngIf="filteredProjects().length === 0")
                            div(class="px-3 py-4 text-center text-xs text-neutral-400") 프로젝트가 없습니다
                        ng-container(*ngFor="let p of filteredProjects(); let i = index")
                            div(class="flex items-center gap-2.5 px-3 py-2.5 cursor-pointer hover:bg-neutral-100 transition-colors", [class.bg-neutral-100]="project.status() && project.data().namespace === p.namespace", [class.bg-blue-50]="i === projectSwitcher.highlightIndex", [class.project-switcher-highlight]="i === projectSwitcher.highlightIndex", (click)="switchProject(p)", (mouseenter)="projectSwitcher.highlightIndex = i")
                                i(class="ti ti-folder text-neutral-400 text-lg")
                                div(class="flex-1 min-w-0")
                                    div(class="truncate text-sm text-neutral-800", [class.font-medium]="project.status() && project.data().namespace === p.namespace") {{p.short || p.title}}
                                    div(class="truncate text-xs text-neutral-400 mt-0.5", *ngIf="p.short && p.short !== p.title") {{p.title}}
                //- 트리거 버튼
                button(class="w-full flex items-center gap-2.5 px-3 py-2 rounded-md text-sm text-neutral-600 hover:bg-neutral-200/60 transition-colors", (click)="toggleProjectSwitcher($event)")
                    i(class="ti ti-arrows-exchange text-base text-neutral-400")
                    span(class="truncate flex-1 text-left") 프로젝트 이동
                    i(class="ti text-xs text-neutral-400", [ngClass]="projectSwitcher.open ? 'ti-chevron-down' : 'ti-chevron-up'")
